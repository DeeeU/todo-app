<template>
  <div class="p-8">
    <h1 class="text-2xl font-bold mb-4">ğŸ” ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰</h1>

    <button
      @click="testFetch"
      class="bg-blue-500 text-white px-4 py-2 rounded mb-4"
    >
      APIã‚’ç›´æ¥ãƒ†ã‚¹ãƒˆ
    </button>

    <div class="bg-gray-100 p-4 rounded">
      <h2 class="font-bold">çµæœ:</h2>
      <p><strong>ãƒ‡ãƒ¼ã‚¿å‹:</strong> {{ dataType }}</p>
      <p><strong>é…åˆ—ã‹:</strong> {{ isArray }}</p>
      <p><strong>ä»¶æ•°:</strong> {{ count }}</p>
      <p><strong>æœ€åˆã®è¦ç´ :</strong></p>
      <pre class="bg-white p-2 rounded mt-2 text-sm">{{ firstItem }}</pre>
    </div>
  </div>
</template>

<script setup lang="ts">
const { fetchTodos } = useTodos()

const dataType = ref('')
const isArray = ref(false)
const count = ref(0)
const firstItem = ref(null)

const testFetch = async () => {
  console.log('=== ç›´æ¥ãƒ†ã‚¹ãƒˆé–‹å§‹ ===')

  const result = await fetchTodos()

  dataType.value = typeof result
  isArray.value = Array.isArray(result)
  count.value = result?.length || 0
  firstItem.value = result?.[0] || null

  console.log('=== ãƒ†ã‚¹ãƒˆçµæœ ===')
  console.log('å‹:', typeof result)
  console.log('é…åˆ—:', Array.isArray(result))
  console.log('ä»¶æ•°:', result?.length)
  console.log('ç”Ÿãƒ‡ãƒ¼ã‚¿:', result)
}
</script>
